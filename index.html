<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>STARMEDIA DIRETTA TV</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <style>
    html, body {
      margin: 0;
      height: 100%;
      background: black;
      overflow: hidden;
    }
    #playerWrapper {
      position: relative;
      width: 100%;
      height: 100%;
      background: black;
    }
    video {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
      pointer-events: none;
    }
    #muteBtn {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 32px;
      font-family: sans-serif;
      padding: 20px 40px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      z-index: 20;
      display: none;
      pointer-events: auto;
    }
  </style>
</head>
<body>

<div id="playerWrapper">
  <video id="vid" autoplay muted playsinline></video>
  <button id="muteBtn">Attiva audio</button>
</div>

<script>
  const video = document.getElementById('vid');
  const muteBtn = document.getElementById('muteBtn');
  const playerWrapper = document.getElementById('playerWrapper');

  const streamUrl = "https://euc13.playlist.ttvnw.net/v1/playlist/CsgGV7ggCtCgB8W2HMNCefnR6QNikL96SxL5krAqp46vdMNosRsTSKcS7UtjeQvB1WXfig_mmgi2F8Av764hI_s-QFRSE7mu8dZgHYVq1-zYme1SiUsS1T2BY7PksN_nRvoMMFrRbtwj9sV_96qWfuricVGR60-WPcZXCi03UUO5Cn1X-32Lqb5f8GGPTJwYyR7pjyJQTlloDGeSt0piuWy74ZeogQUkUc0Op2lr-YdtIEmatV6YZS94qxbZazvwYVS8OZMgnNaG5V1gsOCQvLhx-mTELirIo16Y_y0ydTUpATJD6fzrM9VCb40u-6j3MREG-hczwsTBuRTDpwEegJ0q1gU138-vlWabV9IgUyuYmxU9xGy5cw42OFSu8Y7YPk3mgVALqSck99YB823RqgFt55PzlwCfpMlTB1Z-FN0aX65nC3LGPubRpC0i_GvTWlz5s1icdYYUzGktzoIkKtSXaB86KaxJZ3AF4A-L-5_E2UaUgbfc6b9B19a47N5kTiClYtRw8WRZKJtFuJ8_0jjExz3iradpITeurAX8D9mH_FKc8P2L8yAE1B13P-wJAWqQeBvFOBnz_E1DubE7o1umcdOi0VE18Dw0o1l7xIXLOlBShf0GkklvsNiVQSfRQO8HtKgIX61hARW4VBCUlIs7FsT7u_guPOFU3kDYWEpYXTFkYjdNMYk__NaMOyOuHw16s85GOF4Yq-IyIPOpY2TSEtjDIznN9-RWZmD89ANfCA_FSQ_ni1P78rGQkQ-HIaxhzuSGvytMr-bugxMjhZMdsLNbTy9ru_2iuDMP91Lk6xv8YLLYJFZm4SdkNd0D0GG1XF7m4qfadhlOAASSD2SMmain4IEhT3nFYM64dwvH43D1LSRWnS0gSlPajyramJKndp1jWGEmWYGDZIA6dBmEs-nv8fMZVFT1dHxmo8u3TbofACZOLZCnif25YXlenKWY5HL-FElMBsUgJPL6gKPbQAkeaiFHBTz00TrhDSc6xmCvi6WSDkAJMv8EsvF3_M4vokFghOKH32LkjytoQEcHSKeVqs-JEj6d1arxV8KMQWUkwn5Hus3PwWtnvSy2a9OZywtxSPdjSGmGz6sNKdbz2fEkn0rQwbaIGgylpnmL1vpTasNcTXwgASoJZXUtd2VzdC0yMLwO.m3u8";

  // Supporto HLS
  if (video.canPlayType('application/vnd.apple.mpegurl')) {
    // Safari
    video.src = streamUrl;
  } else if (Hls.isSupported()) {
    // Altri browser
    const hls = new Hls();
    hls.loadSource(streamUrl);
    hls.attachMedia(video);
  } else {
    alert("Il tuo browser non supporta lo streaming HLS");
  }

  // Mostra/nasconde pulsante audio
  let hideTimer;
  function showControls() {
    muteBtn.style.display = 'block';
    clearTimeout(hideTimer);
    hideTimer = setTimeout(() => {
      muteBtn.style.display = 'none';
    }, 3000);
  }

  playerWrapper.addEventListener('click', showControls);

  muteBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    video.muted = !video.muted;
    muteBtn.textContent = video.muted ? 'Attiva audio' : 'Disattiva audio';
  });

  // Blocca tasto destro e shortcut
  document.addEventListener('contextmenu', e => e.preventDefault());
  document.addEventListener('keydown', e => {
    const block = [" ", "ArrowRight", "ArrowLeft", "F12"];
    if (block.includes(e.key) || (e.ctrlKey && e.shiftKey && e.key === "I")) {
      e.preventDefault();
    }
  });

  // Disabilita doppio tap su mobile
  let lastTap = 0;
  video.addEventListener('touchend', (e) => {
    const currentTime = new Date().getTime();
    const tapLength = currentTime - lastTap;
    if (tapLength < 300 && tapLength > 0) {
      e.preventDefault();
    }
    lastTap = currentTime;
  });

  document.addEventListener('gesturestart', e => e.preventDefault());
  document.addEventListener('gesturechange', e => e.preventDefault());
  document.addEventListener('gestureend', e => e.preventDefault());
</script>

</body>
</html>
